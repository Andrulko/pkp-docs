# تأمين النظام الخاص بك

## المبادئ الأساسية

يرجى الاطلاع على [https://pkp.sfu.ca/ojs/README](https://pkp.sfu.ca/ojs/README)، [https://pkp.sfu.ca/omp/README](https://pkp.sfu.ca/omp/README)، أو [https://pkp.sfu. /ocs/README](https://pkp.sfu.ca/ocs/README) للتأكد من أن دليل تثبيت البرنامج و `/fils` مجلد تم تكوينه بشكل آمن على الخادم الخاص بك.

عموما، لا ينبغي أن يكون مجلد `/filder` متاحا على الشبكة ويجب أن يكون خارج دليل تثبيت البرنامج الرئيسي. سيقوم تطبيق البرنامج بإدارة الوصول إلى ملفات التقديم الخاصة استناداً إلى أدوار المستخدم والأذونات \(أي سيتاح للمحررين الوصول إلى جميع ملفات التقديم، في حين سيتمكن المؤلفون فقط من الوصول إلى ملفات التقديم الخاصة بهم\).

بالإضافة إلى ذلك، لضمان أمن المجلد `/fils` لا ينبغي أن يكون مقروءاً من قبل المستخدمين الآخرين على الخادم. فقط خادم الويب يجب أن يكون لديه أذونات القراءة/الكتابة اللازمة حتى OJS، OMP أو OCS يمكن قراءة الملفات الموجودة وإضافة ملفات جديدة إلى المجلد، مثل

`دراكس--- 6 ojs www 204B 11 Sep 2017 ملفات/`

من المستحسن أن تقوم بتثبيت شهادة SSL لOJS, OMP, أو تثبيت OCS والتأكد من أن موقعك يستخدم دائما بروتوكول HTTPS لإدارة تسجيل المستخدم، وتسجيل الدخول، وتقديم المحتوى للقراء. بمجرد تثبيت شهادة SSL الخاصة بك وتأكيد أنها تعمل \(أي يمكنك الوصول إلى موقعك عن طريق [https://myjournal. rg](https://myjournal.org/)\) يمكنك تكوين موقعك ليستخدم دائما HTTPS باستخدام الإعداد التالي في `config.inc.php`:

`; إجبار اتصالات SSL على نطاق الموقع
force_ssl = على`

يجب عليك أيضًا تعيين عنوان URL الأساسي لاستخدام إصدار HTTPS من المجلة أو الصحافة أو المؤتمر:

`; الرابط المثاني لتثبيت OJS
base_url = "https://myjournal.org"`

للتأكد من أن طلبات إعادة تعيين كلمة المرور من المستخدمين تنتج كلمات مرور عشوائية آمنة، تأكد من تعيين ملح طويل عشوائي في `config.inc.php`:

`; الملح الفريد لاستخدامه لتوليد تجزئة إعادة تعيين كلمة المرور
ملح = "sdlkjfhleiqrfgbksdlkjgbelruywoeiyt7384gdqlywqvlwjf"`

## نشر برنامج PKP بأمان

> قسم ساهم به Kenton Good

ويمكن تحقيق النشر الآمن لبرامجيات عملية حفظ السلام على أفضل وجه باستخدام التوصيات التالية. والتي يرد وصفها في الوثائق/README في كل تنزيل من البرمجيات:

* تخصيص قاعدة بيانات إلى OJS, OMP, و OCS؛ واستخدام بيانات الاعتماد الفريدة للوصول إليها. تكوين قاعدة البيانات هذه لإجراء النسخ الاحتياطي الآلي على أساس منتظم. إجراء نسخة احتياطية يدوية عند الترقية أو أداء الصيانة. إذا لم يكن لديك حق الوصول إلى قاعدة البيانات الخاصة بك قم بالاتصال بمدير النظام الخاص بك وتأكد من أن النسخ الاحتياطية لقاعدة البيانات تتم من أجل OJS الخاص بك.
* تكوين البرنامج (`config.inc.php`) لاستخدام تجزئة SHA1 بدلا من MD5.
* تمكين كلمة التحقق أو Reaptcha في ملف `config.inc.php` الخاص بك، واختبر أنها تعمل. هذا سيمنع معظم تسجيلات المستخدم غير المرغوب فيها.
* تكوين البرنامج (`config.inc.php`) لاستخدام `force_login_ssl` بحيث يتصل المستخدمون المصادقون بالخادم عبر HTTPS. (يجب عليك أيضا إنشاء وتكوين شهادة SSL بشكل صحيح للقيام بذلك بشكل صحيح.)
* قم بتثبيت البرنامج بحيث لا يكون دليل الملفات دليلاً فرعياً من OJS، OMP أو تثبيت OCS ولا يمكن الوصول إليها مباشرة عبر خادم الويب.
* تقييد أذونات الملف قدر الإمكان.
* نشر واختبار آلية احتياطية مناسبة. وينبغي لآلية النسخ الاحتياطي أن تقوم بحفظ قاعدة البيانات وملفات النظام، ودليل ملفات الإرسال (معلمة `files_dir` في `config. nc.php`). من الناحية المثالية، يجب أن تقوم بعمل نسخ احتياطية في الموقع وخارجه.
* تأكد من أن بيئة خادم الويب الخاص بك يتم تحديثها بانتظام، خاصة مع أي تصحيح أمني وكل التصحيحات الأمنية.

وإذا ما اتبعت هذه الخطوات، فسوف تقلل إلى حد كبير من خطر الوقوع فريسة لتقنيات القرصنة الشائعة. إذا تم تشغيل OJS, OMP أو OCS ، فإننا نحثك بشدة على مراجعة الإعدادات الموجودة لديك والتأكد من أن هذه الخطوات قد اتبعت.

### إدارة الملفات الآمنة

يتعامل المؤلفون والمراجعون والمحررون مع ملفات الطلبات المقدمة من الأشخاص الذين لا يعرفونهم يوميا، وهناك بعض الاحتياطات الأساسية التي تريد اتخاذها للتخفيف من احتمال التعرض للخطر عن طريق أحد هذه الملفات. هذه الخطوات لا تختلف عن كيفية التعامل مع البريد الإلكتروني أو الحياة اليومية الأخرى على الإنترنت، ولكن يجدر أن نوجز هنا بشكل عام.

* تأكد من أن لديك برنامج مكافحة الفيروسات مثبت، وأنه محدث
* تأكد من أن نظام التشغيل الخاص بك وجميع البرامج (وخاصة وورد وإكسل) مستكملة، المثالي عن طريق تشغيل أي ميزات التحديث التلقائي المتاحة لك
* تأكد من أن لديك حل احتياطي متاح لأجهزة الكمبيوتر الخاصة بك
* تدريب إدارة كلمة المرور الجيدة: لا تستخدم نفس اسم المستخدم/كلمة المرور في OJS, OMP, أو OCS كما تريد لأي حساب آخر على الإنترنت، ولا تستخدم كلمة مرور سهلة التخمين
* تعامل مع كل ما تحصل عليه عبر الإنترنت مع معرفة أنك حصلت عليه من شخص لا تعرفه، وتتصرف بالمثل. إذا بدا أن الطلب مشبوه لأي سبب (عنوان بريد إلكتروني غريب، عنوان عام أو مجرد، إلخ). - معالجة الملفات المدرجة بقدر إضافي من اليقظة.

## التشفير

> قسم ساهم به Kenton Good

استخدام تشفير SSL/TLS لتأمين موقعك يجلب مزايا في الأمان والخصوصية والحماية الرقابية وتحسين محرك البحث وسلامة البيانات.

### مزايا الأمان والخصوصية

* وقد بدأت متصفحات الإنترنت في عرض تحذيرات بشأن المواقع غير الآمنة لتلك المواقع التي لا تزال تستخدم تحت العنوان التالي: (. يمكن للمستخدمين الذين يشاهدون مثل هذه الرسالة عندما يزورون موقعك أن يجعلوا الموقع يبدو غير مشروع، أو يحتمل أن يكون خبيثا.
* بدون التشفير، يتم تمرير نص واضح لتسجيل دخول المشرف والمستخدم، مما قد يعرض بيانات الاعتماد هذه لأي شخص يقوم بمسح الشبكة.
* بدون التشفير، أنت لا تحمي ما يصل إليه المستخدمون أو يبحثون عنه داخل موقعك. أي شخص يفحص الشبكة يمكنه رؤية هذه الاستعلامات.

### مزايا تحسين محرك البحث (SEO)

أعلنت جوجل في عام 2014 أن ليسبس [سيتم معاملته كإشارة تصنيفية](https://webmasters.googleblog.com/2014/08/https-as-ranking-signal.html) بمعنى المواقع التي يتم خدمتها تحت ألفيبس ستكون أكثر قابلية للاستكشاف داخل فهرس جوجل من تلك التي يتم خدمتها تحت ألفيك .

### الحصول على شهادة

الشهادة تمكن اتصالاً آمناً من متصفح الويب الخاص بالمستخدم إلى الخادم الذي يستضيف موقعك.  لا يمكن تثبيت شهادة لموقعك في إطار OJS, OMP. أو برمجيات OCS وستحتاج إلى خبرة أو مساعدة تقنية على مستوى حاسوب خدمة الشبكة.  وعند النظر في مضيفة برامجيات حاسوبية، يعتبر تحديد مستوى الدعم الذي تقدّمه تلك البرامجيات أحد الاعتبارات الهامة.

بداية جيدة تسأل موفر خدمة الاستضافة الخاص بك إذا كان لديهم حل موجود لدعم TLS أو شهادات SSL -- قد يكون مزود الاستضافة الخاص بك قادراً على إنشاء/إصدار TLS أو شهادة SSL لك. إذا لم يكن لديك حق الوصول إلى القذيفة لتثبيتك، قد تكون هذه هي الطريقة الوحيدة لإضافة حماية SSL/TLS لموقعك.

قد يكون شراء الشهادة خيارا متاحا لك أيضًا. تسمى الشركات التجارية التي تقدم الشهادات [سلطات الشهادات](https://en.wikipedia.org/wiki/Certificate_authority) (CA). توفر ويكيبيديا قائمة [موفري CA](https://en.wikipedia.org/wiki/Certificate_authority#Providers) عن طريق حصة السوق. بالإضافة إلى توفير الشهادات التي تمكن من التشفير، والشهادات التقليدية الصادرة عن شركة CA توفر مزايا عديدة من بينها فحص العملاء للمساعدة في التحقق من هوية العملاء وشهادات البطاقات الهشة. اعتمادا على الميزات التي تحددها مع عملية الشراء الخاصة بك، يمكن أن تكلف شهادات CA 100 دولار في السنة ويجب تجديدها قبل انتهاء صلاحيتها.

[لنقوم بالتشفير](https://letsencrypt.org/) هو خيار شائع للحصول على الاشتراك أيضًا. فلنقوم بالتشفير هو سلطة شهادات مجانية وآلية ومفتوحة (CA)، تعمل من أجل المنفعة العامة. وهي خدمة يقدمها فريق بحوث أمن الإنترنت. وتقدم الشهادات مجانا، مع بعض القيود:

* لا تقدم سوى شهادات DV (التحقق من البيت)
* أكثر تقنياً بقليل، إذا لم يدعم مزود الاستضافة الخاص بك بالفعل سوف تحتاج إلى توليد من قذيفة

### تمكين SSL (يتطلب الوصول إلى قذيفة):

#### توليد CSR (طلب توقيع التصنيفات)

الخطوة المطلوبة لتوليد شهادة إذا كنت ستشتري شهادة من وكالة تشفير CA غير مشفرة. وفيما يتعلق بكيفية القيام بذلك، فإن هذا يختلف من توزيع واحد لـ Linux إلى ما يلي، ويمكن الاطلاع هنا على بعض الأمثلة الشائعة لـ Linux:
* [Ubuntu](https://www.digitalocean.com/community/tutorials/how-to-create-a-ssl-certificate-on-apache-for-ubuntu-14-04)
* [المركز/RHEL 7](https://www.digitalocean.com/community/tutorials/how-to-secure-apache-with-let-s-encrypt-on-centos-7)
* [إنشاء شهادة LetsEncrypt باستخدام Certbot عبر Shell](https://certbot.eff.org/) (يوفر اتجاهات مخصصة تبعاً لبيئة استضافة Apache, Nginx, الخ)
* [دليل لإنشاء .CSR في Apache](https://www.alphassl.com/support/create-csr/apache.html)

#### الاحتفاظ بشهاداتك

عندما تشتري الشهادة من شركة كأس المال، فإنك تشتري الشهادة لمدة تتراوح بين سنة واحدة وثلاث سنوات. ومن المقرر أن تنتهي صلاحية الشهادات وسيلزم تجديدها مما يؤدي إلى مصروفات جديدة وقت التجديد. دعونا تشفير الشهادات تنتهي صلاحيتها كل 90 يوما. يمكن تكوين برنامج التشفير (certbot) لتجدد الشهادات تلقائياً قبل انتهاء صلاحيتها. المعنى بمجرد تثبيته يجب أن يكون لديك الحد الأدنى من الصيانة تتحرك إلى الأمام. تتم الأتمتة باستخدام `cron` أو `systemd`.

## إدارة البريد المزعج

هناك عدد من خطوات التكوين التي يمكنك اتخاذها لمكافحة SPAM والأشكال الأخرى من نشاط التسجيل الخبيث على موقعك.

### CAPTCH/ReCAPTCHA

تكوين كلمة التحقق وتمكينها لتسجيل المستخدمين والإشعارات والتعليق. ننصح بشدة باستخدام [Google ReCAPTCHA](https://www.google.com/recaptcha/intro/). \(Older OJS 2 إصدارات تحتوي على PHP captcha، ولكن ثبت أن ذلك أقل أماناً من ReCaptcha.\)

إذا كنت تستخدم OJS أكبر من 2.4. -3, لن تتمكن من استخدام أحدث إصدار من ReCAPTCHA \(v2\)، ولن يعمل ReCAPTCHA بشكل صحيح بعد 31 مارس 2018. **الترقية موصى بها بشدة**.

لتكوين ReCAPTCHA:

1. تسجيل حساب وإنشاء "خاصية" لموقعك هنا : [https://www.google.com/recaptcha/intro/](https://www.google.com/recaptcha/intro/)
2. تأكد من أن الخطوط ذات الصلة لتمكين كلمة التحقق غير معلَّقة في `config.inc.php`
3. نسخ ولصق المفاتيح العامة والخاصة التي تتلقاها كجزء من تسجيل الممتلكات في قسم `[captcha]` من إعدادات `. nc.php`:

```
recaptcha_public_key = 123456abcdef
Recaptcha_private_key = abcdef123456
```

لا تنسى أن تختبر هذا الإعداد عن طريق تسجيل حساب اختباري وتأكيد أن ReCAPTCHA يظهر و b\) التحقق من صحة ReCAPTCHA بشكل صحيح.

### تمكين التحقق من الحساب

OJS, OMP, ويمكن تكوين OCS بحيث يجب إكمال خطوة التحقق من صحة حساب البريد الإلكتروني لجميع حسابات المستخدم الجديدة قبل أن تتمكن من تسجيل الدخول والتفاعل مع النظام. للقيام بذلك، لا تعليق وتكوين الأسطر التالية في `config.inc.php`:

```
؛ إذا تم تمكينه، يجب التحقق من صحة عناوين البريد الإلكتروني قبل تسجيل الدخول ممكن.
المطلوب_المصادقة = على

؛ الحد الأقصى لعدد الأيام قبل انتهاء صلاحية الحساب غير المصدق عليه وحذف
المصادقة = 14
```

يتطلب التكوين أعلاه جميع التسجيلات الجديدة للنقر على رابط والتحقق من صحة حسابهم قبل أن يكون قادراً على تسجيل الدخول؛ وستقوم بالتقسيم التلقائي لأي حسابات غير مصدقة بعد 14 يوما.

### تنظيف الكثير من المستخدمين

إذا كنت هدفا لبوت SPAM، تمكين الإجراءات المذكورة أعلاه قد لا يكون كافيا: قد يكون لديك بالفعل عدد كبير من حسابات SPAM في نظامك. الطريقة الوحيدة لإزالة المستخدمين هي دمج حسابات البريد المزعج في حساب موجود باستخدام أداة دمج المستخدمين. \(سيؤدي هذا إلى حذف المستخدمين المشكلة. يتم دمج أي إرسالات، سجل التحرير، إلخ. من مشكلة المستخدم (المستخدمين) في حساب المستخدم الآخر.\)

يمكن استخدام هذه الأداة عبر واجهة المستخدم لكنه أبطأ \(و فقط OJS/OCS 2 لديه خيار دمج أكثر من مستخدم واحد في كل مرة في UI\). وتتمثل طريقة أكثر فعالية في استخدام أداة سطر الأوامر:

`$ أدوات php / mergeUsers.php myUsername spamuser`

اعتبارا من OJS/OMP 3.2، يمكن دمج مستخدمين متعددين في أمر واحد:

`$ أدوات php / mergeUsers.php myUsername spamUser1 spamUser2 spamUser3 [...]`

… حيث `اسم المستخدم` هو المستخدم الذي سيتم دمجه، و `البريد المزعج المستخدم` هو المستخدم المراد حذفه. قبل OJS/OMP 3.2، هذه الأداة تعمل فقط على دمج واحد في كل مرة، ولكن يمكن نصها. يمكن أن يكون نص php على سبيل المثال:

```
<?php
$names = الملف ('/tmp/names. xt', FILE_SKIP_EMPTY_LINES)؛
preach ($names as $member_name => $member) {
        echo exec ("php /ojswebroot/tools/mergeUsers. hp admin-user " .escapeshellcmd($member));
}
?>
```

ويتوقع البرنامج النصي أن يتم تحديد جميع حسابات البريد المزعج بواسطة اسم المستخدم وإدراجها في ملف `names.txt` ، اسم واحد لكل سطر، مثل هذا:

```
spamuserOne
spamUserTwo
spamUser3
…
```

يجب تخزين ملف `names.txt` على الخادم والموقع المشار إليه بواسطة البرنامج النصي \(مثلاً: "/tmp/names.txt"\). يجب أن يحدد البرنامج النصي أيضا موقع النص الخاص بـ mergeUsers.php script \(على سبيل المثال/ojswebroot/tools/mergeUsers. hp"\)، وأيضاً المستخدم الذي يجب أن تدمج فيه جميع هذه الحسابات \(مثلاً. "admin-user" - يجب أن يكون هذا حساب موجود\). قم بتحديث هذه المعلمات لتتناسب مع بيئتك. **لا تقم بتخزين هذا البرنامج النصي, أو ملف `names.txt` في موقع يمكن الوصول إليه!**

## أسئلة أمنية متكررة

> قسم ساهم به Kenton Good، وتم تكييفه من [منتدى مجتمع PKP](https://forum.pkp.sfu.ca/t/pkp-applications-and-security/27991)

وفيما يلي بعض الأسئلة العامة التي أجابنا عنها أكثر من بضع مرات في الماضي، إلى جانب بعض الإجابات. سوف نضيف إلى هذه القائمة ونحن نتلقى أسئلة مع مرور الوقت.

**هل تعلن عن نقاط الضعف الأمنية، وإذا كان الأمر كذلك، أين؟**

نحن نفعل ذلك. يعلن PKP جميع نقاط الضعف الأمنية الصالحة، وإصلاحاتها عندما تكون متاحة، عن طريق منتدى المجتمع؛ مدونات الأخبار لدينا؛ عبر فيسبوك و تويتر؛ وعلى صفحات تحميل التطبيق لدينا. وتنشر جميع الإصلاحات أيضا في مستودع كود Github الخاص بنا. وفي حالة ما إذا كشف طرف ثالث عن وجود ضعف أمني، فإننا نطلب عدم الإفصاح العلني عنها إلا بعد الحصول على إصلاح، وفي ذلك الوقت نعمل مع الطرف الثالث لإخطار الجمهور بالضعف وبالإصلاح.

**وأعتقد أنني وجدت ضعفا أمنيا. كيف يمكنني الإبلاغ عن ذلك؟**

يرجى إرسال وصف مفصل للضعف أمام البريد الإلكتروني للدعم: [support@publicknowledgeproject.org](mailto:support@publicknowledgeproject.org). وسوف نرد عليكم في أسرع وقت ممكن بتقييم أوجه الضعف. وإذا كان ذلك في الواقع ضعيفا في إطار مكتب العدل والمساواة أو مكتب إدارة الموارد البشرية أو مكتب خدمات الرقابة الداخلية (أي ليس اختراقا بسبب سوء تشكيل خادم/برنامج عام، أو ضعف في تطبيق برمجي آخر، أو شيء يرتدي ملابس تبدو وكأنها ضعيفة، ونحن نراها في بعض الأحيان)، سنمضي قدما في الخطوات التالية: تحديد ونشر إصلاح، ثم يكشف عن المشكلة ويصلح للجمهور.

وهناك خيار آخر هو تقديم مشكلة (وإذا كان متاحا، تصحيح في شكل طلب سحب) عن طريق [Github](https://github.com/pkp/pkp-lib).

**يوميتي لديها أطنان من تسجيلات البريد المزعج. هل هناك أي شيء يمكنني فعله حيال هذا؟**

نعم - يمكنك تمكين إعدادات كلمة التحقق في موقعك، التي توجد في ملف `config.inc.php` الخاص بك. هناك كابتشا عادية، وتنفيذ "Reaptcha" الخاص بجوجل والذي يتطلب مفاتيح خاصة/عامة خاصة بها (والتي يمكنك الحصول عليها من جوجل - راجع التكوين `. ملف nc.php` لمزيد من التعليمات). يمكنك أيضًا تشغيل التحقق من صحة البريد الإلكتروني في ملف `config.inc.php` الخاص بك لفرض تسجيل التحقق من حسابهم عبر رابط بريد إلكتروني. سيتم حذف الحسابات غير المصدق عليها تلقائيًا بعد عدد من الأيام، التي يمكنك ضبطها. انظر `require_validation` و `validation_timeout` في ملف التهيئة.
