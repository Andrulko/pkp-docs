# استكشاف الأخطاء

## الأذونات، الوصول إلى الملف، Etc.

### تكوين أذونات الملف

من الصعب تحديد خطوات دقيقة نحو تحديد أذونات الملفات الصحيحة. يعتمد الكثير على نظام تشغيل الخادم، خادم الويب، وإعداد PHP.

بشكل عام، تريد تعيين أذوناتك بحيث يمكن لخادم الويب الخاص بك القراءة والكتابة (بشكل متكرر) إلى التكوين `. nc.php` `files_dir`، و `cache/`و `public/`. اختياري، للمميزات المضافة والأمان المخفض، يمكنك تمكين الكتابة إلى `config.inc. hp`، إلى `إضافات /` وربما إلى الملفات المحلية `.xml`. يجب أن يكون لخادم الويب الخاص بك الوصول للقراءة فقط إلى جميع الملفات والدلائل الأخرى الموزعة في الحزمة.

ابدأ بالتحقق من أي خادم API PHP يستخدم على الخادم الخاص بك. إذا تم تثبيت OJS, OMP, أو OCS مسبقا، قم بتسجيل الدخول كمدير الموقع، انقر فوق "معلومات النظام"، وفي أسفل الصفحة، انقر فوق "معلومات PHP الموسعة". العثور على السطر الذي يقول "واجهة برمجة تطبيقات الخادم". اعتماداً على أي API تستخدمه \(mod\_php/SAPI أو CGI/FastCGI\)، يجب تعيين الأذونات على النحو التالي.

* mod\_php/SAPI: في هذا التكوين، تقوم جميع البرامج النصية PHP على النظام عادة بتنفيذ نفس المستخدم \(عادة حسابات Apache" أو www-data\). كن حذراً من أن هذا قد يكون غير آمن على مضيف مشترك. الملفات \_dir \(تم تكوينها في config.inc). hp\) ودليل ذاكرة التخزين المؤقت والدليل العام وجميع المحتويات والدلائل الفرعية يجب أن تكون قابلة للكتابة والقراءة من قبل مستخدم خادم الويب. ملف تكوين config.inc.php يجب أن يكون قابل للقراءة من قبل مستخدم خادم الويب.
* CGI/FastCGI: في هذا الإعداد، سيتم عادة تشغيل البرامج النصية PHP تحت حساب المستخدم الخاص بك \(رغم أن تكوين الخادم قد يختلف\). ويمكن أن يكون ذلك تشكيلا مؤمنا بشكل جيد. يجب أن تكون الملفات \_dir \(تكوين في config.inc.php\)، ودليل ذاكرة التخزين المؤقت، والدليل العام، وجميع المحتويات والدلائل الفرعية قابلة للكتابة والقراءة بواسطة حساب المستخدم هذا. ملف تكوين config.inc.php يجب أن يكون قابل للقراءة بواسطة هذا الحساب.

#### كيف يقوم لينكس بهذا؟

في لينوكس، تعتمد الأذونات على وضع التحكم الرقمي في الدخول وعلى ملكية الملف 63. ففهم مخطط الأذونات هذا شرط لا بد منه.

على سبيل المثال ملكية `apache:www` مع أذونات `750` (`rwxr-x---`) تعني أن المستخدم باتشي يمكنه القراءة، الكتابة والتنفيذ؛ أي شخص لديه `www.w` المجموعة يمكنه القراءة أو التنفيذ؛ والملف محمي من الوصول إليه من قبل أي شخص آخر. لاحظ أن "التنفيذ" يعني شيئين مختلفين كلياً للدلائل عن الملفات!

##### مثال (للاستضافة المخصصة)

بشكل عام، ملكية ذاكرة التخزين المؤقت ``، `عام/`، ، والدلائل الأخرى التي يمكن كتابتها يجب أن تكون مستخدم الويب الخاص بك والمجموعة الأساسية لمستخدم الويب، على سبيل المثال `apache:www-data`. ربما ينبغي أن تكون الأذونات `750`.

يجب أن تكون ملكية الدلائل الأخرى غير القابلة للكتابة على الويب المستخدم الخاص بك، إما مع مجموعة مستخدمي الويب أو مع أذونات التنفيذ العامة. وعلى سبيل المثال:

`myuser:www-data` مع `750`

أو

`myuser:ourgroup` مع `755`

ستكون الملفات القابلة للكتابة على الويب هي نفسها، ولكن بدون إذن التنفيذ:

`apache:www-data` مع `640`

الملفات غير القابلة للكتابة ربما:

`myuser:www-data` مع `640`

أو

`myuser:ourgroup` مع `644`

#### ولكن ماذا عن المستضيفين المشتركين؟

مع بعض المضيفين المشاركين (على سبيل المثال، إذا كان الوصول الوحيد الخاص بك عن طريق cPanel أو أداة مماثلة للمشرف على الإنترنت)، قد لا يكون لديك القدرة على تغيير ملكية الملفات، وخادم الويب الخاص بك يعمل بشكل فعال كمستخدم لك. وفي تلك الحالة، قد لا تزال لديك القدرة على حماية ملفاتك بجعلها غير قابلة للكتابة من قبل المستخدم الخاص بك (حتى وإن كان هذا يبدو منافياً للبديه). في مضيف مشترك، يكاد يكون من المؤكد أنك تريد رفض أذونات العالم لملفاتك، ولكن تتطلع إلى التوثيق والدعم لمستضيفك على وجه الخصوص.

#### ملاحظة على إعدادات الأمان

لأن تكوينات الأمان يمكن أن تتباين، وبسبب حجم طلبات الدعم التي نتلقاها فيما يتعلق بأذونات الملفات، ولن نتمكن إلا من تقديم مساعدة محدودة بشأن هذه المسائل. يرجى أن تكون محددة قدر الإمكان عند النشر حول مشاكل الأذونات.

وضع PHP الآمن ليس تكوين موصى به وقد لا يعمل بشكل صحيح. هذا لأنه في بعض الإعدادات سوف يتسبب في إنشاء دالة PHP `mkdir()` لإنشاء دلائل لا يمكن قراءتها أو كتابتها بعد ذلك بسبب أذونات الملف. هذا قيد من الوضع الآمن وقد يمنعك من استخدام OJS في بيئة الوضع الآمن.

### HTML Galleys لا تعرض بشكل صحيح / الملفات التي قمت بتحميلها لا يتم التعرف عليها بشكل صحيح.

هذا على الأرجح بسبب تعريف الخادم بشكل غير صحيح لملف HTML الخاص بك كشيء آخر غير HTML. أسرع طريقة لتشخيص هذا هي التحقق من صفحة تحرير Galley: إذا كنت قد قمت برفع ملف HTML وحقل التسمية يقول شيئا آخر غير "HTML" (مثل "بدون عنوان"، على سبيل المثال)، لم يتم تعريف الملف بشكل صحيح بأنه HTML ولن يتم عرضه بشكل صحيح على الأرجح.

ويستخدم كل من OJS و OMP و OCS ثلاث طرق لتحديد ملف بالترتيب التالي:

* دالة mime_content_type الخاصة بـ PHP، والتي تستخدم ملف Magic.mime الخاص بالنظام (هذه الطريقة مهملة)
* PHP finfo_... مجموعة الدوال (التي تحل محل mime_content_type كطريقة مفضلة)
* أداة "ملف" خارجي، من خلال تنفيذ ما يلي:

`الملف -بي [اسم الملف هنا]`

قد تحدث مشاكل إذا:

* أنت تستخدم الخيار الأول ولكن ملف Magic.mime الخاص بك لا يتضمن معلومات كافية عن نوع الملف الذي تحاول التعرف عليه؛
* تكوين الخادم الخاص بك لا يدعم الخيارين الأولين؛
* ليس لديك الصلاحيات الكافية لتشغيل أداة خارجية كما هو الحال في الخيار الثالث.

بالإضافة إلى ذلك، قد تواجه مشاكل بسبب الملفات المشوهة. إذا كنت تواجه مشكلة في التعرف على ملفات HTML الخاصة بك، قد ترغب في تشغيلها من خلال [HTML-Tidy](http://www.w3.org/People/Raggett/tidy/) أو بطريقة أخرى التأكد من أنها صالحة HTML. ملفات HTML التي تم إنشاؤها بواسطة معالج الكلمات على وجه الخصوص قد تواجه صعوبة في التعرف عليها كـ HTML.

قد ترغب أيضًا في البحث في [المنتدى](https://forum.pkp.sfu.ca) عن الكلمات الرئيسية "تقليد سحري" أو عن "ميتقليت" -- العديد من المستخدمين لديهم هذه المشكلة. وهناك عدة مناقشات حول كيفية حلها.

### ملفات CSS الخاصة بي لا يتم التعرف عليها بشكل صحيح.

ويمكن أن يكون ذلك نتيجة لمسألة تحديد الهوية المذكورة أعلاه، أو يمكن أن يكون لأن ملف css الخاص بك يتضمن تعليقا على السطر الأول، قبل أي CSS فعليا. حاول إزالة التعليق (التعليقات) من الجزء العلوي من الملف وإعادة التحميل.

لاحظ أن هذا الوضع كثيرا ما يحدث عند تحميل نسخة معدلة من ملف CSS الرئيسي. نحن لا نوصي بهذا النهج -- من الأفضل تحميل ملف CSS الذي يحتوي فقط على تجاوزات للأنماط التي ترغب في تعديلها من التخطيط الافتراضي، كورقة النمط الرئيسية تطبق قبل أي ملفات CSS مخصصة. وهذا سيساعد على تجنب صداع ورقة الأنماط عند الترقية.

## ترميز الأحرف

مشكلات الترميز ذات الطابع غالبا ما تظهر في حالتين: عندما تنتقل المجلات من منصة أخرى إلى مكتب العدل في أوروبا؛ أو (أكثر شيوعا) عند نقل مجلة OJS من خادم آخر إلى خوادمنا.

غالباً ما يكون من المفيد التحقق من إعدادات قاعدة البيانات الحالية للتأكد من أنك تعمل في مجموعة الأحرف التي تعتقد أنك تعمل معها. بمجرد تسجيل الدخول إلى MySQL، جرب ما يلي:

```
إظهار متغيرات مثل 'حرف'؛
إظهار متغيرات مثل 'التجميع'%';
```

الهدف من إصلاح مشاكل ترميز الأحرف هو ضمان تطابق البيانات المخزنة في قاعدة البيانات مع إعدادات مجموعة الأحرف في قاعدة البيانات، `1`. . أننا نخزن بيانات utf8 في قاعدة بيانات utf8. بمجرد تحقيق ذلك، نريد أن نضمن تطابق إعدادات OJS config.inc.php مع إعدادات البيانات و db ، i. . يتم تعيين كافة إعدادات محارف قاعدة البيانات إلى utf8 في config.inc.php.

### مقدمة لمجموعات وترميز الأحرف

توفر المقالات التالية مقدمة جيدة لمجموعات وترميز الأحرف:
* [ترميز الأحرف: المفاهيم الأساسية](https://www.w3.org/International/articles/definitions-characters/)
* [الحد الأدنى المطلق لكل مطور البرمجيات بالتأكيد، يجب أن يعرف بشكل إيجابي عن مجموعات Unicode و الأحرف (بدون أعذار!)](https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/)

### النهج العام

* تحقق من إعدادات config.inc.php db: العميل، الاتصال، مجموعات أحرف قاعدة البيانات
* مقارنة إعدادات config.inc.php db مع الإعدادات الفعلية في db، أي
 * `إظهار المتغيرات مثل 'حرف %'`
 * `إظهار المتغيرات مثل "التصنيف"%"`
* غالباً ما يكون هناك عدم تطابق بين 1. و 2 الذي يوفر أول أدلة عدم تطابق
* توليد اثنين من مدافن db:
 * `mysqldump db --opt --default-character-set=latin1 result-file=latin1.sql`
 * `mysqldump db --opt --default-character-set=utf8 result-file=utf8.sql`
* استكشاف كل ملف من ملفات الإغراق باستخدام أدوات ترميز الشخصية: [https://spin.atomicobject.com/2011/06/21/character-encoding-tricks-for-vim/](https://spin.atomicobject.com/2011/06/21/character-encoding-tricks-for-vim/)

#### المشكلة الشائعة رقم 1: تعاريف الجداول اللاتينية مع بيانات UTF8

أثناء الانتقال من مؤسسة أخرى، قد تتلقى دفن MySQL الذي يتضمن تعاريف الجداول التي تم تعيينها إلى الدفن في الدوران(1) (أي إنشاء وصول \_مفاتيح … دال - البيانات الفعلية المحفوظة في الجداول على الرغم من أن البيانات الفعلية المحفوظة في الجداول هي UTF8. يمكنك config.inc.php على الخادم الأصلي لتأكيد ما إذا كان هذا هو الحالة: إذا كان العميل \_charset = utf-8 في التكوين. وبعد ذلك سيتم تخزين البيانات بوصفها UTF8 في قاعدة البيانات.

بشكل افتراضي، يتم تكوين المجلات على خوادمنا بشكل صحيح لاستخدام إعدادات UTF8 في جميع أنحاء قاعدة البيانات و config.inc.php. استيراد قاعدة بيانات غير متطابقة مع تعاريف الجداول اللاتينية وبيانات UTF8 سيؤدي إلى مشاكل في عرض الأحرف في OJS.

ويمكن استخدام خطوات التحويل وعملية الاستيراد التالية لحل هذه المسائل:

خطوات التحويل:
* اطلب دفن mysql لاتيني مع `--default-character-encoding=latin1 --result-file=dump.latin1.sql`
* افتح `dump.latin.sql` في vim
* إزالة 'تعيين الناقلات اللاحقة' من الجزء العلوي من الملف
* استبدال تعاريف جدول Latin1 بتعاريف جدول utf8 عبر `:%s/CHARSET=latin1/CHARSET=utf8/g`
* تعيين ترميز الملف للملف إلى utf8 عبر `:set fileencoding=utf8`
* حفظ الملف إلى اسم ملف جديد عن طريق `:w dump.utf8.sql`

استيراد الخطوات:
* إنشاء قاعدة بيانات Tf8 نظيفة: `إنشاء بيانات استيراد \_ojs DFAULT CHARSET utf8;`
* التبديل إلى db: `استيراد USE \_ojs`
* تعيين كل شيء إلى utf8: `تعيين NAMES utf8;`
* استيراد الإغراق المحول: `SOURCE dump.utf8.sql;`

... وهلم جرا، استبدل "المقال\_settings" بالجدول الذي تحتاجه للتنظيف، و "setting\_value" بالعمود في الجدول الذي يحتاج إلى تنظيف.

#### المشكلة الشائعة رقم 2: عروض الأسعار المزدوجة مع مشكلة الترميز على ملفات DUMP

أثناء الترقية/الترقية من خادم lib-ojs إلى ملفات sfulib MySQL dump من السابق قد تعرض مشكلة ترميز الأحرف المتصلة باقتباسات مزدوجة، على سبيل المثال: a<unk> €متعلم,a<unk> €<9d> والتي يجب أن تكون "تعلم"، حتى باستخدام التجميع الصحيح UTF8 للتصدير من قاعدة البيانات.

تظهر هذه المشكلة عندما يقوم المستخدمون بنسخ ولصق الاقتباسات الذكية من MS Word التي تستخدم مجموعة حروف النافذة 1252 التي لا تتطابق مع أي شيء في UTF8. الذي يؤدي في هذه التسلسل الذي يبدو مثل تعلم يورو، أ يورو<9d>.

يمكن استخدام الخطوات التالية لحل مشكلة الترميز هذه:

* قم بتثبيت على جهازك المحلي [ftfy](https://ftfy.readthedocs.io/en/latest/)، حيث أنه أداة بايثون سوف تتطلب تثبيت python3 أيضًا؛
* تحرير سطر الأوامر ftfy التنفيذي cli.py (قد يكون في مسار مختلف تبعاً لبيئتك.): `/usr/local/lib/python3.6/site-packages/ftfy/cli.py`
* حوالي السطر 100 (`$ vim +100 cli.py`) إضافة معلمة إضافية 'uncurl_quotes=False' إلى دالة fix_file. وفيما يلي نص مشروع القرار:

```
للخط في fix_file(file, encoding=encoding,
     fix_entities=fix_entities,
     normalization=normalization,
     uncurl_quotes=False):
```

* قم بتنزيل ملف DUMP إلى جهازك المحلي (أي : العميل.المولد.sql) وستتمكن من تشغيل: `$ ftfy --output=client.Cle.sql client.المولد.sql`

#### العمل اليدوي (مصنع أخير)

إذا كنت تمر بأحرف غريبة مثل A<unk> a<unk> <unk> / A<unk> <unk> <unk> <unk> a<unk> <unk> <unk> <unk> <unk> <unk> <unk> a<unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> a<unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> a<unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> حاول أوامر SQL التالية للبحث عنها واستبدالها (أخذت من هذا [مشاركة المدونة](https://digwp.com/2011/07/clean-up-weird-characters-in-database/)):

```
تحديث المقال\_إعدادات تعيين الإعدادات \_القيمة = REPLACE(setting\_value, 'A<unk> <unk> <unk> <unk> <unk> <unk> <unk> <unk> ', '');
UPDATE article\_settingT setting\_value = REPLACE(setting\_value, 'A<unk> <unk> a<unk> <unk> <unk> <unk> ', '<unk> ');
تحديث المقال\_إعدادات تعيين الإعدادات \_القيمة = REPLACE(setting\_value, 'A<unk> DAW<unk> a<unk> ', "');
UPDATE article\_settingT setting\_value = REPLACE(setting\_value, 'A<unk> <unk> <unk> a<unk> <unk> a<unk> ', '')؛
تحديث المقال\_SetT setting\_value = REPLACE(setting\_value, 'A<unk> <unk> <unk> <unk> <unk> <unk> ', '"');
UPDATE article\_settingT setting\_value = REPLACE(setting\_value, 'A<unk> <unk> <unk> a<unk> <unk> '' '' ');
تحديث المقال\_إعدادات تعيين الإعدادات \_القيمة = REPLACE(setting\_value, 'A<unk> <unk> <unk> <unk> <unk> <unk> ', '-');
UPDATE article\_SetT setting\_value = REPLACE(setting\_value, 'A<unk> <unk> a<unk> <unk> <unk> <unk> ', '<unk> ');
```

إذا فشلت كل الأمور الأخرى:

وقد نفذ كورت أمر الإغراق التالي بنجاح، ولكن دون أن يشرح بالضبط ما يفعله:

```
mysqldump ocs-$USERNAME --opt --default-character-set=latin1 --skip-set-charset --single-transaction --ignore-table=ocs-$USERNAME.paper_search_keyword_list --ignore-table=ocs-$USERNAME.paper_search_object_keywords --ignore-table=ocs-$USERNAME.paper_search_objec--result-file=/tmp/$USERNAMEsql
```

## الإبلاغ عن الأخطاء: صفحات فارغة، تشخيصات، إلخ.

### عندما أنقر على زر ما أو اتبع بعض الرابط، أترك مع صفحة فارغة. ماذا أفعل؟

1: تحقق من سجل أخطاء خادم الويب الخاص بك

عادة ما يشير هذا إلى حدوث خطأ في PHP وتم إرسال الرسالة إلى خادم الويب الخاص بك أو ملف سجل النظام. تحقق هناك - مثل `/var/log/apache/error.log`، على الرغم من أن الموقع بالضبط سيعتمد على تكوين الخادم الخاص بك - لمزيد من التفاصيل.

2: تحقق من أذونات الملف الخاص بك

إذا لم تقم بتثبيت OJS أو OMP أو OCS حتى الآن، ثم السبب الأكثر احتمالاً هو مشكلة في أذونات الملف في دلائل الذاكرة المخبئة/الذاكرة المخبئة/t_compile الخاصة بك. راجع الوثائق / README للحصول على معلومات عن أذونات الملف.

3 - زيادة استكشاف الأخطاء

إذا لم يكن لديك حق الوصول إلى ملف سجل الخادم الخاص بك، يمكنك محاولة إضافة ما يلي بالقرب من الجزء العلوي من الفهرس. hp يسبب إرسال رسائل الخطأ إلى المتصفح:

`ini_set('display_errors', E_ALL)؛`

إذا كنت تعمل في بيئة Windows IIS، قد يكون عليك أيضا تمكين `fastcgi.impersonate=1` في ملف php.ini.

قد ترغب أيضًا في تعديل السطر 27 من الملف `lib/pkp/includes/functions مؤقتاً (تقريبًا). nc.php`، إزالة مشغل @ ، لذلك تبدو هكذا:

`if(include_once BASE_SYS_DIR.'/'.$filePath) === false) {`

تذكر أن تعود إلى ذلك التغيير بعد ذلك.

في بعض الأحيان سيفشل برنامج نصي PHP محدد مضمن في البرنامج دون أي رسالة خطأ، . بسبب تعديل معطل أو مشكلة في أذونات الملف. لتحديد البرنامج النصي الذي قد يسبب المشكلة، يمكنك تعديل `lib/pkp/includes/functions.inc.php` وإيجاد السطر التالي:

`استيراد الدالة ($class) {`

أضف أدناه

`صدى "استيراد" . $class . " \n";`

سيؤدي هذا إلى سرد ملفات OJS, OMP, أو OCS قبل استيرادها (لأي مشاهدة للموقع). إذا كنت تواجه مشكلة مع ملف معين، فسيكون آخر ملف مدرج. تحقق من أذونات الملف عليها وحاول تشغيلها من خلال PHP linter (php -l path/to/file.inc.php).

تأكد من العودة إلى هذا التغيير عند الانتهاء.

### ما هو المداخن وكيف أقوم بعرضها في OxS؟

يعرض المكدس المسار من خلال الكود المأخوذ لعرض الصفحة الحالية. عندما يتم عرض خطأ، غالباً ما يساعد المكدس في المساعدة على تتبع كيفية حدوث الخطأ، من خلال السماح للمطور بخطوة من خلال الرمز ومعرفة المسار الذي يجب أن يتخذوه لتكرار الخطأ.

لتمكين التكرار على الأخطاء في OxS، قم بتشغيل الخيار 'show_stacktrace' في config.inc.php (بالقرب من الجزء السفلي من الوثيقة). مثال على ذلك سيبدو مثل هذا:

```
خطأ DB: خطأ: بناء بناء الجملة غير صالح للمدخل لعدد صحيح: ""
تتبع المخزون:
الملف: /var/www/ojs/classes/article/ArticleGalleyDAO. nc.php السطر 76
وظيفة: DAO->الاسترجاع ("SELECT COUNT(*) FROM article_galleys WHERE public_galley_id = ? ...", Array(2))
الملف: /var/www/ojs/classes/submission/form/ArticleGalleyForm.inc.php line 233
وظيفة: ArticleGalleyDAO->publicGalleyIdExists("pdf", "")
الملف: /var/www/ojs/pages/sectionEditor/SubmissionitHandler. nc.php السطر 1459
وظيفة: ArticleGalleyForm->execute("layoutFile")
الملف: /var/www/ojs/pages/sectionEditor/SubmissioneditHandler.inc. hp السطر 1314
وظيفة: SubmissionEditHandler::uploadGalley("layoutFile")
الملف: /var/www/ojs/pages/sectionEditor/SectionEditorHandler.inc. hp السطر 469
وظيفة: SubmissioneditHandler::uploadLayoutFile()
الملف: خط (مجهول)
وظيفة: SectionitorHandler::uploadLayoutFile(Array(0))
الملف: /var/www/ojs/index. السطر 88
وظيفة: call_user_func(Array(2), Array(0))
الملف: /var/www/ojs/index.php 99
وظيفة: handlerequest()
```

### أنا أتلقى الخطأ التالي: خطأ فادح: حجم الذاكرة المسموح به البالغ 8388608 بايت تم استنفاده (الخ)

الحد الأقصى لذاكرة PHP الخاص بك هو على الأرجح منخفض جداً. عادة ما يتم تعيينها عند 8 ميغابايت بشكل افتراضي، ولكن OJS, OMP, ويحتاج OCS إلى ما لا يقل عن 16 ميغابايت للتشغيل بشكل سليم (وأكثر في كثير من الأحيان للمهام العرضية مثل التحديث). يمكنك العثور على توجيه تهيئة `memory_limit` في ملف التكوين الخاص بالخادم `php.ini`.

### بعد إكمال صفحة التثبيت، أستلم خطأ في قاعدة البيانات. ماذا يحدث؟

ربما كنت تتلقى خطأ مشابه لـ

`خطأ DB: الجدول 'ojs.journal' غير موجود`

... حيث الجزء 'ojs' من الخطأ هو اسم قاعدة البيانات الخاصة بك كما هو محدد أثناء التثبيت. ما حدث على الأرجح هو أنك حاولت إنشاء قاعدة البيانات الخاصة بك وقد حاول المثبت ملء قاعدة البيانات تلك بالبيانات الضرورية، ولكن لسبب ما لم يتمكن من القيام بذلك. والأسباب المحتملة لذلك تشمل نظام قاعدة البيانات الخاص بك (على سبيل المثال. MySQL) عدم السماح بإنشاء قاعدة بيانات على شبكة الإنترنت؛ أو عدم السماح بإنشاء جدول على نطاق واسع. وأفضل حل هو ما يلي:

* استعادة `config.inc.php` إلى النسخة الأصلية (نسخ على `config.TEMPLATE.php` سيفعل هذا)؛
* إنشاء قاعدة البيانات يدويًا عن طريق phpMyAdmin, Cpanel, أو ما شابه ذلك، اعتمادًا على ما يوفره موفر الخدمة الخاص بك؛
* إعادة تشغيل عملية التثبيت عن طريق إعادة تحميل صفحة OJS/OMP/OCS؛
* ملء جميع حقول التثبيت حسب الاقتضاء، للتأكد من أنك تكتب في الاسم الصحيح لقاعدة البيانات التي أنشأتها حديثا؛
* إلغاء تحديد خيار "إنشاء قاعدة بيانات جديدة"؛
* انقر فوق خيار "تثبيت يدوي" في أسفل صفحة التثبيت.
* انسخ استعلام قاعدة البيانات من الصفحة الناتجة ، وقم بتشغيله على أساس قاعدة البيانات الخاصة بك عبر phpMyAdmin أو ما شابه ذلك.

يرجى ملاحظة أنه عند النقر فوق زر التثبيت اليدوي ، ستقول الصفحة الناتجة أن تثبيت OJS/OMP/OCS قد اكتمل بنجاح، ولكن هذا ليس صحيحاً تماماً: مازال عليك نسخ بيانات SQL وإضافتها إلى قاعدة البيانات الخاصة بك يدوياً.

**ملاحظة:** قد تواجه أيضا خطأ في الإضافة. حدثت أخطاء في الملحق في الماضي حيث حاولت الإضافات الوصول إلى جدول "المجلات" قبل أن يقوم المثبت بإنشاء الجدول؛ هذه ستؤدي إلى "جدول 'ojs. الصحف غير موجودة" رسالة عندما يحاول شخص ما تحميل صفحة المثبت في المقام الأول. في هذه الحالة، يمكنك تضييقه إلى إضافة معينة عن طريق التحقق من أثر المكدس.

## توافق تطبيقات PHP و PKP

إذا كنت تقوم بتشغيل PHP 5.3+ \(والتي يجب عليك القيام بها\)، سوف تحتاج إلى تشغيل OJS 2.4.0+، OMP 1.0+ أو OCS 2.3.6+. لن تعمل الإصدارات القديمة من البرنامج على الإصدارات الأحدث من PHP.

إذا كنت تقوم بتشغيل PHP 7+، سوف تحتاج إلى تشغيل OJS 3.0+.

يتطلب OJS و OMP 3.1.2+ **** PHP 7.1 أو أعلى. يرجى الرجوع إلى [docs/README](https://github.com/pkp/ojs/tree/master/docs) لإصدار OJS/OMP لمزيد من المعلومات حول متطلبات نظام PHP.

**ملاحظة**: إذا كنت تقوم بتشغيل OJS أو OMP 3. على مكدس PHP7+ LAMP ، يرجى تذكر تحديث معلمة مشغل MySQL الخاصة بك على `config.inc.php` الملف ، مثل:

`السائق = mysqli`
