# خيارات النشر

ووفقا لمتطلباتنا، نحتاج إلى تغطية مجموعة كبيرة من سيناريوهات النشر، من عمليات نشر يومية واحدة من OJS \(S1\) على طول الطريق إلى المناظر الطبيعية للنظام الكبير، بما في ذلك دمج بحث OJS مع تطبيقات البحث التعسفية \(S4\). ومن حسن الحظ أن الغالبية العظمى من التشكيل الوارد وصفه في هذه الوثيقة مستقل عن سيناريو الانتشار. وهذا يعني أن البارامترات القليلة جدا هي التي ستختلف بالنسبة للشكل الموصى به لسيناريوهات النشر المختلفة. وبصورة أكثر تحديدا، نوصي بخيارين للنشر:

* يمكن دعم سيناريوهات المجلة الواحدة وسيناريوهات التثبيت الواحد \(S1 و S2\) مع خادم عازف مدمج. التكوين الخاص بالخادم المدمج سيكون جزءا من التوزيع الافتراضي لـ OJS. ونحن نسمي خيار النشر هذا بأنه ”الانتشار المدمج“.
* سيناريوهات التثبيت المتعدد و "just-another-app" \(S3 و S4\) يمكن دعمها مع خادم الموزع المركزي الذي يمكن الوصول إليه من جميع خوادم OJS على الشبكة الداخلية للموفر. ونطلق على خيار النشر هذا ”نشر شبكة“. نحن نعتقد أنه حتى كبار مقدمي خدمات OJS مع مائة أو أكثر من المجلات لن يحتاجون إلى ميزات متقدمة لقابلية التوسعة مثل التكرار، انظر أعلاه مناقشة "معماري الفهرس". غير أنه لا يوجد شيء يمنع مقدمي الخدمات من تكرار نواة OJS الخاصة بهم إلى عدة خوادم إذا رغبوا في ذلك. يمكن تحقيق التوازن بين الخوادم المتماثلة عبر وكيل HTTP أو عن طريق تكوين جزء من تثبيت OJS مع جهة خلفية وجزء مع الأخرى. غير أن هذه التشكيلات خارجة عن نطاق هذه الوثيقة.

## خصائص الانتشار العامة

### متطلبات التثبيت

جميع متطلبات تثبيت OJS تنطبق بدون تغيير. متطلبات التثبيت الإضافية التالية يجب أن يستوفيها خادم OJS \(نشر مضمنة\) أو خادم الموسر \(نشر الشبكة\):

* نظام التشغيل: أي نظام تشغيل يدعم J2SE 1.5 أو أكثر \(هذا يشمل جميع الإصدارات الأخيرة من لينكس وويندوز\).
* مساحة القرص: في حالة النشر المضمن: يجب أن يكون لتركيب OJS مساحة خالية من القرص لا تقل عن 150 ميغابايت والقرص حيث يوجد دليل "الملفات"، يجب أن يكون هناك مساحة خالية كافية على القرص لاستيعاب فهرس البحث الذي أنشأه الموزع وينبغي ألا يكون هذا أكثر من ضعف المساحة التي تشغلها الوديان والملفات التكميلية في نفس المجلد. وفي نشر الشبكة، تعتمد متطلبات الحيز على القرص لحاوية السيرليت وثنائيات السيرفر على تفاصيل التثبيت المختارة. وينبغي أن يكون الحيز المخصص للفهرس على الأقل ضعف الحيز الذي تشغله جميع الوديان والملفات التكميلية لليوميات المراد فهرستها.
* RAM: تعتمد متطلبات الذاكرة إلى حد كبير على حجم المجلات المفهرسة. إذا كانت المجلات تحتوي على عدة جيغابايت من ملفات الوادي المقالة فستكون هناك حاجة إلى عدد قليل من جيغابايت من ذاكرة الوصول العشوائي لخادم الموزع ولذاكرة التخزين المؤقت لملف نظام التشغيل. المنشآت الأصغر تتطلب ذاكرة أقل. نوصي ببدء تشغيل الخادم المدمج مع الإعدادات الافتراضية والعودة إليه فقط إذا حدثت مشاكل في الأداء في الممارسة العملية. في معظم الحالات، ستعمل الإعدادات الافتراضية بشكل جيد.

### الشفرة / التوزيع الثنائي

وكلا خياري النشر مشتركان في أن يتم دمج العميل المجند وتشكيله في دائرة العدل والمساواة كإضافة عامة. في حين أن الإضافة معطلة، فإن وظيفة البحث الحالية OJS ستعمل دون تغيير. تمكين المكون الإضافي سوف يتحول إلى الموصل كخلفية للبحث.

سيتم الحفاظ على رمز إضافة OJS داخل مستودع github الرسمي في PKP. وتنشئ إضافة SWORD الموجودة بالفعل سابقة لإدماج مكتبات البرمجيات من خلال آلية البرنامج المساعد PKP. لم يتم حتى الآن دمج أي برنامج جافا في نظام العدالة والعدالة عن طريق المكونات الإضافية. ولذلك نتوقع أن هناك حاجة إلى تطوير بعض تقنيات التكامل الإضافية.

ويرد وصف لنهجنا المقترح للتكامل في README.txt الذي زود بالمكون الإضافي وسوف يُلخص هنا.

لعدة أسباب لا ينبغي أن تكون ثنائيات جافا للطائرة أو سولر/لوسين جزءاً من التوزيع الافتراضي لـ PKP:

* الثنائيات كبيرة ومن شأنها أن تفجر توزيع OJS بشكل غير مناسب حيث أن العديد من مستخدمي OJS لن يريدوا لنا البحث فقط.
* عند توزيع ثنائيين، يجب على PKP أن يحرص دائماً على ترقية ثنائية إلى أحدث إصدار وحتى إطلاق إصلاحات ساخنة عند حدوث التحديثات الأمنية. وهذا يضيف الكثير من تكاليف الصيانة غير الضرورية.

كما أن التكامل كمشروع فرعي Git كما هو الحال في شركة SWORD لا يبدو ملائما لأن الطائرة النفاثة/solr لا تستخدم git لمشاريعها وسيكون الحفاظ على خادم إطلاق الغازات الثنائية النفاثة الخاص بنا مكلفا نسبيا.

نوصي بدلاً من ذلك بأن يقوم المستخدمون بتنزيل ثنائيات الطائرات بدون تغيير من مصادرهم الأصلية واستخراجها إلى وجهات موثقة جيداً داخل ملحق OJS الموسع. يمكن لبرنامج نصي تثبيت معد مسبقاً بعد ذلك الاعتناء بنسخ أو ربط ثنائيي المواقع المطلوبة لهم.

لا يمكننا أن نحدد وصفة دقيقة لتركيب الموصوف في نشر الشبكة لأن ذلك سيعتمد إلى حد كبير على سياسة التثبيت التي يتبعها المورد. ومن المحتمل أن يكون لدى معظم مقدمي الخدمات بالفعل حاوية مفضلة للعقار وقد يرغبون في تركيب وتكوين الحاوية والمسوح من خلال آليات تركيب خاصة ببرمجيات المصدر المفتوح.

### أمان

خادم مثال سول لا يتم تكوينه مسبقاً مع مراعاة الأمان. ولا توفر شركة سولر نفسها أي آليات للتوثيق أو الترخيص. يجب أن يتم تأمين الجندي في معظم الأحيان من خلال حاوية السيرليت وعن طريق حماية خادم السيرفر يعمل بشكل صحيح. وينبغي اتباع التوصيات التالية:

* الخوادم التي تستضيف المورد يجب أن تكون محفوظة بشكل صحيح. يجب أن يكون فقط لتطبيقات البحث العميل حق الوصول \(مقيد\) إلى واجهات البحث والتحديث الخاصة بالمولد. وفي حالة السيناريو المدمج، يعني هذا أنه لا ينبغي أن يكون الميسر معرضاً للشبكة على الإطلاق.
* وينبغي للمديرين أن يولوا اهتماماً خاصاً للمخاطر المحتملة التي تنطوي عليها هذه الآلية عند وضع استراتيجيتهم الخاصة بجدران الحماية للبائع. يجب حماية العملاء الذين لهم حق الوصول إلى المورد \(مثل متصفحات الموظفين الإداريين\) من "التسلّم" بواسطة الطرف الثالث.
* ويُثبط بشدة تعريض المورد للجمهور. إذا تم ذلك، يجب تنفيذ مخطط مصادقة في حاوية servlet أو وكيل HTTP للحد من الوصول إلى واجهة مدير العميل، معالج استيراد OJS DIH ، معالج التحديث الافتراضي للمصدر والمعالج العام المحدد. يتم توفير عينة من التكوين للركاب باستخدام مصادقة HTTP لـ BASIC في التكوين الافتراضي. هذه ليست آلية حماية موصى بها!
* لقد اخترنا توفير معالج بحث مخصص بدلاً من إتاحة البحث من خلال المعالج العام المختار. ويسمح المعالج العام المختار بالوصول غير المضمون إلى أجهزة التحديث والمدير وبالتالي قد لا يكون عرضة للجمهور.
* نوصي بتعطيل البث عن بعد في solrconfig.xml: تمكين البث البعيد = false. وإلا فإن محتوى الملفات التعسفية التي يمكن أن تصل إليها عملية الموزع محلياً أو عبر الشبكة ستتعرض لأي شخص يمكنه الوصول إلى الموصل!
* نوصي بتعطيل JMX ما لم يتم استخدامه بالفعل.
* نحن نوصي بعدم استخدام التهيئة المثالية لـ Solr دون تغيير لأنها ليست آمنة.

وبما أن معظم مقدمي الخدمات يعملون في سيناريو الوصول المفتوح، نحن لا نوصي بقيود الوصول إلى معالج البحث بشكل افتراضي \(باستثناء خط الحماية كما هو مبين أعلاه\). التكوين الافتراضي الموصى به سيكشف واجهة الاستعلام لجميع المستخدمين على شبكة مزود الخدمة الذين لديهم وصول HTTP إلى نقطة النهاية المجند.

من أجل الحد من الوصول في بيئة قائمة على الاشتراك وتخفيض كمية البيانات التي ستنقل عبر الشبكة، تم تكوين معالج البحث المخصص لدينا مع معلمات استعلام إلزامية \("invariant"\) تحد من - ضمن أمور أخرى - الحقول التي تم إرجاعها إلى حقل معرف المقالة ودرجة البحث. وترد في هذه الوثيقة، حسب الاقتضاء، توصيات أخرى تتعلق بالمجلات القائمة على الاشتراكات.

### مواصفات النشر

تم توفير توصيف نشر الموسر الافتراضي في الملحقات/العامة/solr/embedded/solr/conf/solrconfig.xml. وهذا الوصف موصى به لكلا عمليات النشر المدمجة والشبكة.

تم تطوير تكوين jetty الافتراضي للسيناريو المدمج، انظر الإضافات/Generic/solr/embedded/etc/\*.\*

وسترد في الأقسام التالية تفاصيل تشكيلات الموزع والحاويات الخاصة بكلا السيناريوهات.

## نشر مضمن

وسيعمل خيار النشر المدمج على الغالبية العظمى من مستخدمي هذا النظام. مع بعض خطوات التثبيت الإضافية السهلة والموثقة جيداً، من الممكن تحويل كل خادم OJS إلى خادم عازف يجب أن يكون آمناً بشكل معقول لمستخدمي OJS الأغلبية. وقد وضعنا هذه الخطوات في برنامج ريدميه. xt الذي يأتي مع المكون الإضافي وسيتم عرضه على المكون الإضافي في الصفحة الرئيسية ما دام لم يتم تكوين أي خادم عازف عامل للمكون الإضافي.

يعمل النشر المدمج مع خادم Jetty المعد مسبقاً و ثنائيات السور المنشورة مباشرة في دليل الملحق الخاص "الإضافات/العام/solr/lib". تكفي لتنزيل واستخراج ثنائيات وتنفيذ برنامج نصي لتثبيت للصعود والتشغيل، وكلاهما على أنظمة التشغيل لينكس وويندوز. نحن نقوم بتجميع جميع التشكيلات الموصلة المطلوبة للنشر المدمج داخل المكون الإضافي. عادة ما لا يتطلب الأمر تكوين يدوي إضافي. سيتم حفظ البيانات الانتقالية، أي الفهرس وقاموس التحقق الإملائي، بشكل افتراضي إلى الملفات \_dir التي تم تكوينها في config.inc.php. سنقوم بإنشاء دليل فرعي لـ "solr" هناك لأغراضنا.

انظر الإضافات/العام/solr/embedded/bin/start.sh للحصول على مزيد من التفاصيل عن تكوين السيناريو المضمن.

### أمان

ويتبع تكوين السيناريو المدمج نهج "آمن بشكل افتراضي". في حين أننا نوصي بالربط الحماية المناسب لخادم OJS حتى في السيناريو المدمج، التكوين الافتراضي سيوفر الحماية الأساسية حتى مع عدم وجود جدار حماية في مكانه. نقوم بذلك من خلال ربط خادم Jetty المدمج بجهاز التكرار \(127.0.0). \) الذي ينبغي أن يحظر الدخول الخارجي إلى الخادوم على معظم نظم التشغيل. التعليقات أعلاه حول ضعف CSRF الخاص بالموسم تنطبق على النشر المدمج إذا قام المستخدمون بتسجيل الدخول إلى خادم OJS وفتح متصفح \(أو برنامج عميل آخر مع الوصول إلى الشبكة\) هناك.

### ترقية Jetty/solr

وحتى في السيناريو المدمج، سيلزم رفع مستوى الرصيف والسرير من وقت لآخر، مثلا في حالة تحديث الأمن أو الأداء. وفي هذه الحالة، يمكن ببساطة استخراج النسخ الجديدة إلى ”الإضافات/العامة/solr/lib“ وفقا للتعليمات الواردة في README.txt.

### البدء/إيقاف سول

في السيناريو المدمج، يمكن بدء سور من داخل OJS مع مكالمة خلفية exec\(\) من سكريبت بدء تشغيل نسخة مضبوطة من jetty مع معلمات البدء المناسبة. على نظام ويندوز لن يعمل هذا على الأرجح بدون خطوات تثبيت إضافية لإنشاء خدمة النظام. قد نحاول بدلاً من ذلك العمل حول هذا التقييد عن طريق تشغيل Jetty ضمن عملية خلفية PHP "دائمة" \(على سبيل المثال[http://stackoverflow.com/questions/45953/php-execute-a-background-process](http://stackoverflow.com/questions/45953/php-execute-a-background-process)\). وما إذا كان ينبغي اختبار هذه الأعمال عملياً. لا يبدو أنه خيار قابل للتوسع وموثوق.

بدلاً من ذلك، يمكن دائماً تنفيذ نص بدء لينكس أو Windows Shell solr المقدم في الملحقات/العامة/solr/embedded/bin مباشرة على خادم OJS.

في السيناريو المدمج، قد تكون امتيازات خادم الويب / مستخدم PHP مناسبة أيضا لخادم الموسر. ستكون هذه هي الحالة الافتراضية عند بدء الممول من داخل OJS. غير أن المستخدمين مجانيون، لتنفيذ البرنامج النصي لبدء يدوياً مع أي مستخدم آخر طالما أنه يتأكد من أن هذا المستخدم لديه أذونات الكتابة إلى ملفات فهرس الموصل.

### تسجيل

تحليل سجلات استعلام البحث أداة رائعة لتحسين البحث. نحن لا نوصي بتمكين تسجيل الاستفسارات بشكل افتراضي في السيناريو المضمن. معظم المستخدمين الذين يختارون السيناريو المدمج لن يكونوا قادرين على تفسير سجلات الاستعلامات، لذلك فإن هذه السجلات سوف تشغل مساحة القرص دون داع. يحدد التكوين الافتراضي مستويات تسجيل للحصول على معلومات كافية على وحدة التحكم عندما يحتاج المستخدمون إلى دعم من خلال المنتدى أو وسائل اتصال أخرى عن بعد.

## نشر الشبكة

يتيح خيار نشر الشبكة لمقدمي الخدمات الكبار توصيل أي تركيب OJS إلى خادم عازل يعمل في حاوية اعتباطية لـ servlet \(e. . Jetty أو Tomcat\) تم نشرها في مكان ما على الشبكة المحلية. نحن لا نعطي تعليمات تثبيت محددة لخوادم الموزعين مثل هذا لأن هذه التعليمات تعتمد على نظام التشغيل الفردي الخاص بالمزود و \(في حالة لينوكس\) توزع نظام التشغيل. ومع ذلك، نحن نتأكد من أن مقدمي الخدمات يمكنهم نسخ دليل تكوين الموسر الذي تم توفيره مع المكون الإضافي المسمى بدون تغيير وتوصيله إلى حاوية المستفيد الخاص بهم. وهذا يمكّن مقدمي الخدمات من الحصول على التحديث والتشغيل من خلال تثبيت وحدة متوافقة مع OJS في وقت ضيق جدا.

سوف نوصي أيضًا بتوفير تعليمات تثبيت كاملة خطوة بخطوة لتوزيع لينكس المعروف جيداً مثل ديبيان/أوبونتو. ويمكن عندئذ تكييف ذلك بسهولة مع عمليات التوزيع الأخرى أيضا.
