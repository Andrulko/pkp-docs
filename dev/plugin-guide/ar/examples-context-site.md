---
title: مثال - إدارة السياق والموقع - دليل الإضافات لOJS و OMP
---

# إدارة السياق والموقع

يمكن استخدام OJS و OMP لتشغيل أكثر من صحيفة أو صحافة. نطلق على كل مجلة أو نضغط على سياق. عادة ما يتم تشغيل الإضافات في سياق ولكن بعضها قد يعمل على مستوى الموقع بأكمله. يجب عليك كتابة الإضافات الخاصة بك للعمل سواء كانت قيد التشغيل في السياق أو على مستوى الموقع.

يمكنك دائماً استرداد السياق الحالي من `طلب`.

```php
$context = تطبيق::get()->getrequest()->getContext();
```

في الصفحات على نطاق الموقع، مثل إعدادات المشرف أو صفحة فهرس المجلات على نطاق الموقع، سيكون السياق `فارغ`.

```php
إذا كان ($context) {
  / / الطلب الحالي هو لمجلة أو اضغط
} أخرى {
  // الطلب الحالي هو لصفحة على نطاق الموقع
}
```

إذا كان البرنامج المساعد الخاص بك يدعم صفحة [الإعدادات](./settings)، يجب حفظ الإعدادات بشكل منفصل لكل سياق.

```php
$this->تحديث($context->getId(), 'editorName', 'Daniel Barnes');
```

استخدم ثابت `CONTEXT_SITE` لحفظ الإعدادات على مستوى الموقع.

```php
إذا ($context) {
  $contextId = $context->getId();
} أخرى
  $contextId = CONTEXT_SITE؛
}
$this->تحديث($contextId، 'محرر'، 'دانيال بارنز')؛
```

## الإضافات على نطاق الموقع

أضف طريقة `isSitePlugin` لتمكين نموذج إعدادات الملحق في قائمة الإضافات على نطاق الموقع.

```php
البرنامج التعليمي المثل المساعد الموسم يمدد برنامج Genericplugin {
  الدالة العامة isSitePlugin() {
    العودة الحقيقية؛
  }
}
```

يمكن أيضا تمكين الإضافات على نطاق الموقع وتعطيلها وتهيئتها لكل سياق.

---

عرض المزيد من [الأمثلة](./examples).