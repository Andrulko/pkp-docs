# تخصيص ترجمة محلية

يمكنك استخدام الإضافة المحلية المخصصة لتخصيص أو تغيير الترجمة على التثبيت المحلي الخاص بك. كما أنه يسمح لك بتخصيص النص في مجلة OJS الخاصة بك أو مطبعة OMP أو خادم OPS بأي لغة مثبتة ومفعلة. على سبيل المثال، إذا كنت ترغب في تغيير النص المعروض على أزرار توصية المراجعة في سير العمل المقدم، يمكنك استخدام الإضافة المحلية المخصصة.

اللغة المحلية المخصصة متاحة وقابلة للتشغيل بشكل موثوق فقط لOJS/OMP/OPS 3.2.0 والأحدث.

إذا كنت ترغب في إجراء ترجمة يمكن للمستخدمين الآخرين الاستفادة منها، فمن الأفضل ترجمتها إلى Weblate. ولكن هناك بعض الحالات التي يفضل فيها تخصيص ترجمة على التثبيت المحلي الخاص بك، والإضافة المحلية المخصصة تسمح لك بالقيام بذلك. يوضح هذا الفصل كيفية استخدام الإضافة.

الرجاء الاطلاع على [كيف تعمل اللغات و لغات العمل](https://docs.pkp.sfu.ca/translating-guide/en/managing-languages#how-languages-and-locales-work) في هذا الدليل للحصول على شرح لكيفية عمل ملفات اللغات و اللغات في برنامج PKP.

## تثبيت وتفعيل الإضافة المحلية المخصصة

أولا، تأكد من أن المكون الإضافي قد تم تثبيته وتمكينه:
1. الذهاب إلى الإعدادات > الموقع > الإضافات
2. العثور على الإضافة المحلية المخصصة في قائمة الإضافات المثبتة (إذا لم تكن مدرجة مع الإضافات المثبتة) تحقق من معرض الإضافات وقد تحتاج إلى تثبيته أولا)
3. انقر على المربع لتفعيله
4. انقر فوق السهم الأزرق بجوار اسم الإضافة ثم رابط *تخصيص* الذي يظهر أدناه. سيؤدي هذا إلى تحديث الصفحة والآن يجب أن ترى علامة تبويب جديدة في قائمة إعدادات الموقع تسمى *Locales*.

## كيفية عمل الإضافة المحلية المخصصة

تحت علامة التبويب Locales سوف تشاهد قائمة من الملفات المحلية التي تحتوي على جميع مفاتيح الرسائل التي تظهر كنص في موقعك، لللغة التي قمت بتعيينها كاللغة الأساسية تحت إعدادات الموقع > الإعداد > اللغات. لذا، إذا كان لديك أكثر من لغة واحدة على موقعك ولكن البرتغالية (البرازيل) هي المحلية الأساسية، الملفات المحلية التي تراها في علامة التبويب المحلية ستكون للغة البرتغالية (البرازيل).

![](./assets/translating-guide-custom-locale-localefiles.png)

إذا كنت ترغب في تعديل ملفات الإعدادات المحلية للغة مختلفة مثبتة على موقعك، سوف تحتاج إلى تعيينه مؤقتاً كاللغة المحلية الرئيسية ثم تغيير اللغة المحلية الأساسية عند الانتهاء من تحرير اللغات المحلية.

![](./assets/translating-guide-primary-locale.png)

يمكنك فتح ملف، العثور على مفتاح رسالة فيه، وأدخل قيمة مخصصة لتغيير كيفية ظهور ذلك الجزء من النص على موقعك.  هذه الملفات تتوافق مع الملفات المحلية في المجلدات المحلية لتثبيت موقعك.  توفر الإضافة طريقة للوصول إلى هذه الملفات مباشرة.

كل ملف في مجلد محلي هو مجموعة من مفاتيح الرسائل المصنفة حسب الموضوع، استناداً إلى الميزة أو الوظيفة التي تتعلق بها في تطبيق البرمجيات.  على سبيل المثال، معظم مفاتيح الرسائل المتعلقة بعمل المحرر موجودة في محرر/en_US/editor. o ملف، في حين أن مفاتيح الرسالة لملحق الملف الشخصي ORCID موجودة في ملف الإضافات/العامة/orcidProfile/locale/en_US/locale.po

وهناك شيء آخر صعب يجب أخذه في الاعتبار هو أن كل عملية تثبيت من عمليات OJS OMP أو OPS لديه مجموعتين من الملفات المحلية - 1 في مجلد يسمى lib/pkp/locale, والتي هي للملفات المشتركة بين جميع تطبيقات برمجيات PKP، ومجلد واحد في مجلد يسمى المحلية, والذي هو للملفات الخاصة بالتطبيق (OJS, OMP أو OPS).  على سبيل المثال، جميع قوالب البريد الإلكتروني OJS الإنجليزية موجودة في ملف ojs/locale/en_us/emails.po . في حين أن جميع مفاتيح الرسائل الإنجليزية المتعلقة بحسابات المستخدم موجودة في ملف pkp-lib/locale/en_us/user.po.

وأخيراً، لا يغيب عن البال أن المواقع المحلية ومفاتيح الرسائل يمكن أن تتغير بين إصدارات مختلفة من برمجيات PKP.

## العثور على ملف الإعدادات المحلية للتعديل
لأن مفاتيح الرسالة محفوظة في عدة ملفات مختلفة ويمكنك البحث فقط داخل ملف، قبل أن تتمكن من تحرير مفتاح رسالة، تحتاج إلى معرفة الملف الذي يدخله. وهناك بعض الطرق المختلفة للقيام بذلك.

### تخمين
عند التفكير في المعلومات أعلاه حول كيفية تنظيم الملفات المحلية، يمكنك تخمين الملف الذي يوجد فيه مفتاح الرسالة. اعثر على الملف المحلي في القائمة تحت علامة التبويب المحلية ثم اتبع التعليمات أدناه حول كيفية تعديل مفتاح الرسالة.

قد تحتاج إلى البحث في أكثر من ملف واحد قبل أن تجد مفتاح الرسالة. وقد لا تكون قادراً على العثور عليها بالتخمين ويجب عليك استخدام طريقة أخرى.

### البحث في الملفات المحلية في Github
يحتوي مستودع Github الخاص بـ PKP على مجموعات من جميع الملفات المحلية الموجودة في التثبيت الخاص بك. لذا يمكنك البحث في المستودع لمفتاح الرسالة، وتحديد الملف الذي يوجد فيه، ثم البحث عن مفتاح الرسالة في الملف على التثبيت الخاص بك.

وكما هو موضح أعلاه، قد يكون الملف المحلي ذو الصلة في مستودع pkp-lib أو مستودع ojs/omp/ops

اذهب إلى [مستودع pkp-lib](https://github.com/pkp/pkp-lib) و ابحث عن مفتاح الرسالة الذي تريد تخصيصه. يمكنك وضع علامات اقتباس حول المفتاح لجعل البحث دقيق.

لذلك، إذا كنت ترغب في تخصيص النص الإنكليزي لـ "رفض التقديم"، يمكنك القيام بالبحث التالي: "رفض التقديم" المحلي

يمكنك أيضًا استخدام أدوات البحث لإعداد استعلام بحث أكثر تحديداً.  على سبيل المثال، إذا كنت تبحث عن مفتاح الرسالة "المشكلة الحالية" في ملف اللغة الإنكليزية يمكنك الذهاب إلى https://github. اقوم بالبحث التالي: org:pkp "المشكلة الحالية" مسار :locale/en_US language:"Gettext Catalog"

إذا لم تجد النص في مستودع pkp-lib ، حاول البحث في [مستودع ojs](https://github.com/pkp/ojs)

في قائمة نتائج البحث الخاصة بك، صقل النتائج إلى **التعليمات البرمجية** و ابحث عن ملف الإعدادات المحلية الصحيح في النتائج.

![](./assets/translating-guide-github-locale-keys-search-results.png)

ملاحظة اسم ملف الإعدادات المحلية حتى يمكنك العثور عليه في واجهة الإعدادات المحلية المخصصة. تخطي إلى القسم _____ أدناه.

### البحث باستخدام أدوات سطر الأوامر

يمكنك أيضا البحث باستخدام أدوات سطر الأوامر على الخادم الخاص بك (أو جهاز التطوير).

على سبيل المثال، إذا كنت تبحث عن مفتاح الرسالة "المشكلة الحالية" في ملف اللغة الإنكليزية يمكنك استخدام الأمر التالي:
```
وجد $. -name \*.po -exec fgrep -l "\"الإصدار الحالي\"" "{}" ";"
```

ستحصل على النتيجة التالية، التي تشير إلى أن النص يمكن أن يظهر في هذين الملفين: ./locale/en_US/editor.po ./locale/en_US/locale.po

## تحرير مفتاح الرسالة

الآن بعد أن حددت الملف المحلي الذي يوجد فيه مفتاح الرسالة، يمكنك تعديله.

1. العودة إلى موقع OJS/OMP/OCS الخاص بك
2. الذهاب إلى إعدادات الموقع > المحلية
3. العثور على ملف الإعدادات المحلية الذي حددته في ممارسة البحث السابقة
4. انقر فوق **تحرير** بجوار اسم الملف المحلي لفتحه
5. أدخل مفتاح الرسالة الذي تريد تخصيصه في مربع **البحث** وانقر على **البحث**

![](./assets/translating-guide-search-locale-file.png)

6. في المربع الفارغ، أدخل ما تريد أن يقوله النص المخصص. سيتم تحويل اللون الأصفر كما تكتب، للإشارة إلى أنك تقوم بإجراء تخصيص.

![](./assets/translating-guide-customize-locale-key.png)

7. انقر فوق **حفظ ومتابعة**

الآن يمكنك زيارة الجزء من موقعك حيث يظهر النص المخصص والتحقق من أنه تم إجراء التغيير. 
