# سمات فرعية

عند إنشاء قالب مخصص، يمكنك اختيار أن يكون له تمدد القالب الأصلي. سيحمل قالب الطفل تلقائيًا القوالب والأنماط الموجودة في القالب الأصلي. هذا يسمح لك ببناء موضوع على رأس موضوع موجود مسبقا.

فيما يلي بعض الأشياء التي يمكنك القيام بها بشأن موضوع الطفل:

1. تجاوز متغيرات LESS للموضوع الأصلي لضبط الألوان والطباعة مع بعض الأسطر فقط من التعليمات البرمجية.
2. ضبط رمز HTML خلف قالب مقالة واحدة دون الحاجة إلى إنشاء قالب كامل.
3. تعديل قائمة التنقل الأساسية مع الحفاظ على جميع القوالب الأخرى في مكانها.

في التكرارات السابقة لمكتب العدل والمساواة ومكتب إدارة المكاتب، تحتاج إلى بناء سمات مستقلة تماما أو تحرير سمات موجودة إذا كنت ترغب في تصميم تصميم. أهم فائدة لاستخدام سمات الأطفال هي أنه يمكنك عزل التعليمات البرمجية المخصصة الخاصة بك. هذا يعني أنه يمكنك تحديث السمة الأصلية والتطبيق الأساسي بشكل أكثر أمانا دون تجاوز الكود المخصص.

إذا كنت قد بنت مواضيع لنظم إدارة المحتوى الشعبية مثل [ووردبرس](https://wordpress.org/)، فستكون على دراية بهذا المفهوم. لكننا نتعامل مع الأشياء بشكل مختلف قليلا. سيظهر لك هذا القسم كيفية تعديل أنماط الموضوع الأصلي، وإضافة الأنماط الخاصة بك، وتجاوز ملفات القالب والمزيد.

## ما هو الفرق بين موضوع الطفل وموضوع الوالدين؟

لا شيء.

سمات الطفل و الوالد هي فقط إضافات موضوع عادية ولا تستتبع أي شيء خاص في كيفية بناءها. جميع المواضيع، الطفل أو الوالد، استخدم نفس [قالب API](theme-api.md). يمكنك معرفة المزيد عن هيكل الموضوع وإعداد الموضوع المخصص الخاص بك، في [ما هو الموضوع؟](what-is-a-theme.md).

بمجرد أن يكون لديك إعداد الموضوع، يمكنك استخدام القليل من التعليمات البرمجية الإضافية لتعيين موضوع آخر كموضوع رئيسي. يمكنك التعرف على ما يلي من دليل إعداد السمة [ & الإعداد](theme-setup.md).

```php
<?php
استيراد ('lib.pkp.classes.plugins. hemePlugin')؛
فصل تعليمي ملحق البرنامج المساعد يمدد موضوع البرنامج المساعد

    / **
     * تحميل الأنماط المخصصة لموضوع
     * @return null
     */
    وظيفة عامة في() {
        $this->إضافة ستيلي('stylesheet', 'أسطور/فهرس. مقياس)؛
    }

    /**
     * احصل على اسم العرض لهذا الموضوع
     * @return string
     */
    function getDisplayName() {
        العودة 'ثيمة البرنامج التعليمي';
    }

    /**
     * احصل على وصف هذه الإضافة
     * @return string
     */
    function getDescription() {
        ارجع 'مثالًا على مظهر OJS أو OMP مبني مع وثائقنا المذهلة. ;
    }
}
```

دعونا نركز على طريقة `init()`.

```php
    /**
     * قم بتحميل الأنماط المخصصة للموضوع
     * @return null
     */
    وظيفة عامة داخل () {
        $this->addStyle('stylesheet', 'أسطور/فهرس. س)؛
}
```

يمكنك تعيين سمة الأصل لهذا الموضوع باستخدام طريقة `setParent()`. دعونا نجعل هذا الموضوع موضوع فرعي للموضوع الافتراضي الذي سفن مع OJS 3.0+.

```php
    /**
     * قم بتحميل الأنماط المخصصة للموضوع
     * @return null
     */
    وظيفة عامة داخل () {

        // استخدم السمة الرئيسية الخاصة بالبرنامج المساعد
        $this->setParent('defaultthemeplugin');

        // تغيير معرف سفيف ورقة الأنماط هذا إلى
        // 'Childstylesheet`. هذا يضمن أنه
        // لن يصطدم مع ورقة نمط الوالد.
        $this->addStyle('child-stylesheet', 'styles/index.less');
    }
```

الآن ، عندما يتم تحميل السمة ، سوف تسمي تلقائياً طريقة `init()` للموضوع الأصل. وهذا يعني أن أي برامج نصية أو أنماط مسجلة في هذا السمة سيتم تحميلها.

## إضافة وتعديل الأنماط

إذن الآن موضوع الطفل الخاص بك سوف يقوم بتجميع وتحميل ورقتي نمطين. ورقة الطراز الخاصة بالوالد، والتي تم تعريفها في السمة الرئيسية و تسمى `ورقة الطراز`، وورقة نمط طفلك، التي تسمى `ورقة أنماط الأطفال`.

*تصويبات الأسلاك مجمعة من ملفات LESS. تعرف على المزيد حول [CSS و LESS](css-less.md).

ومع ذلك، في العديد من الحالات، قد ترغب في إضافة أنماط إلى ورقة الأنماط الخاصة بالوالد، بدلاً من تحميل ورقة الأنماط المنفصلة الخاصة بك. يمكنك تجميع الأنماط الخاصة بك تلقائياً مع أنماط الموضوع الرئيسي باستخدام طريقة `modifyStyle()`.

```php
    /**
     * قم بتحميل الأنماط المخصصة للموضوع
     * @return null
     */
    وظيفة عامة داخل () {
        $this->setParent('defaultthemeplugin');
        $this->modifyStyle('stylesheet', ary('addLess' => Sray('styles/index). س)))؛
}
```

هذا مفيد عندما تريد مشاركة المزج أو تعديل المتغيرات في السمة الأصلية. السمة الافتراضية تستخدم عددا من المتغيرات لتحديد الألوان والطباعة والمباعدة والمزيد.

يوضح المثال التالي كيف يمكن لموضوع الطفل الذي يوسع السمة الافتراضية أن يكتب متغير في ملف `styles/index.less` مخصص:

```less
// تغيير اللون الافتراضي من الأزرق #007ab2 إلى الأحمر #b21a00
@primary: #b21a00;
```

## قوالب تجاوز

السمات الفرعية تسمح لك بتجاوز القوالب المحددة من القالب الأصلي، مع الاستمرار في استخدامها عندما لا يتم تجاوز أي قالب.

قسم [HTML/Smarty](html-smarty.md) من هذا الدليل يصف كيفية تحميل ملفات قالب الواجهة الأمامية حسب ترتيب الأولوية. مواضيع الأطفال تضيف موقع جديد ذو أولوية عالية لاسترداد ملفات القالب.

عندما يقوم OJS أو OMP بتحميل قالب، فإنه يبحث بالترتيب التالي.

1. دليل قالب الموضوع الحالي.
2. إذا تم تحديد الموضوع الأصلي، فسيتم تحديد دليل قالب الموضوع الأصلي.
3. دليل قالب OJS أو OMP.
4. دليل `lib/pkp/templates/` داخل التطبيق.

لتجاوز قالب الموضوع الأصلي، انسخ هذا الملف القالب إلى نفس الموقع في قالب الطفل.

## سمات أحفاد

ولا تقتصر علاقة المواضيع بين الوالدين والطفل على مستوى واحد. يمكن أن يكون لديك موضوع الوالدين، موضوع الطفل الذي يوسع نطاق الوالد، ثم موضوع الحفيد الذي يوسع نطاق الطفل.

لا تحتاج إلى تسجيل علاقات موسعة من هذا النوع. عندما يتم تسجيل سمة أحد الوالدين، سيتعامل التطبيق تلقائياً مع أي آباء للموضوع الرئيسي أيضاً.

لن تكون هناك حاجة لهذا في كثير من الأحيان، ولكن يمكن أن يكون مفيداً إذا كنت تدير الكثير من سمات المجلات وترغب في مشاركة التعليمات البرمجية بين الموضوع. أو إذا كنت تقوم بتوسيع نطاق أحد مواضيع الطفل في المجتمع المحلي.

## مثال
إذا كنت تفضل دراسة التعليمة البرمجية، [مثال بسيط على ثيمة الطفل](https://github.com/NateWr/defaultChild) يمكن العثور عليها مع جميع الإعدادات الأساسية في المكان.
